training_cfg:
    mode: "2d"
    epochs: 1
    batch_size: 60
    loss: "binary_crossentropy"
    track_metrics:
        - "accuracy"
        - "jaccard_index"
        - "dice_coefficient"
            
optimizer_cfg:
    # args in tf.KERAS.OPTIMIZERS api docs
    optimizer: "adam"
    learning_rate: 0.00067
    beta_1: 0.9
    beta_2: 0.999
    epsilon: 0.0000001
    amsgrad: false
    
model_cfg:
    model: "resunet2d"
    crop_shape: [128, 128]
    unet_depth: 2
    base_filters: 16
    batch_normalization: true
    transposed_convolution: false
    residual_preactivation: true
    
# # SINGLE_IMAGES_DATASET TWO CHANNELS
# dataset_cfg:
#     dataset_path: "/home/phil/repos/neuroseg/neuroseg/tests/ds"
#     mode: "single_images"
#     n_channels: 2
#     positive_class_value: 1
#     negative_class_value: 255
#     ignore_last_channel: true

# # SINGLE_IMAGES_DATASET SINGLE CHANNEL
# dataset_cfg:
#     dataset_path: "/mnt/ssd1/datasets/em_neuroseg_single"
#     mode: "single_images"
#     n_channels: 1
#     positive_class_value: 1
#     negative_class_value: 255
#     ignore_last_channel: false
    
# #  STACK DATASET
# dataset_cfg:
#     dataset_path : "/mnt/ssd1/datasets/em_neuroseg"
#     mode: "stack"
#     n_channels: 1
#     positive_class_value: 1
#     negative_class_value: 255
#     ignore_last_channel: false


#  MULTISTACK DATASET
dataset_cfg:
    dataset_path : "/mnt/ssd1/datasets/em_neuroseg_multi"
    mode: "multi_stack"
    n_channels: 1
    positive_class_value: 1
    negative_class_value: 255
    ignore_last_channel: false
    
output_cfg:
    output_path: "/home/phil/repos/neuroseg/neuroseg/tests/tmp/train"
    descriptor_path: "/home/phil/repos/neuroseg/neuroseg/tests/tmp/descr"
    enable_wandb_tracking: false
    
data_augmentation_cfg:
    debug_mode: false
    single_thread:  true
    threads: 6
    buffer_size : 1000
    transform_cfg:
        # spatial_transform:
        #     do_elastic_deform: true
        #     deformation_scale: [0, 0.25, 0.25]
        #     do_rotation: true
        #     angle: [-0.314, 0.314]
        #     p_rot_per_sample: 0.15
        #     do_scale: true
        #     scale: [0.95, 1.05]
        #     border_mode_data: "reflect"
        #     random_crop: true
            
        # brightness_transform:
        #     mu: 0
        #     sigma: 0.01
        #     p_per_sample: 0.15
        
        # brightness_multiplicative_transform:
        #     multiplier_range: [0.9, 1.1]
        #     per_channel: true
        #     p_per_sample: 0.15
            
        rot90_transform:
            p_per_sample: 0.15
        
        mirror_transform:
            p_per_sample: 0.15
        
        # gamma_transform:
        #     gamma_range: [0.9, 1.1]
        #     invert_image: false
        #     per_channel: true
        #     p_per_sample: 0.15
            
        # gaussian_noise_transform:
        #     noise_variance: [0, 0.00005]
        #     p_per_sample:  0.15
            
performance_evaluation_cfg:
    # ground_truth_path: "/home/phil/repos/neuroseg/neuroseg/tests/ds/test/masks"
    # data_mode: "single_images"
    window_size: [128, 128]
    batch_size:       15
    chunk_size:       20
    classification_threshold:   0.5
    add_empty_channel:          true
    enable_curves: false
    
callbacks_cfg:
    checkpoint:
        monitor:        "val_loss"
        verbose:        1
        save_best_only: false
        mode:           "min"    
        
    csvlogger:
        append:     true
        separator: ";"
    
    reducelronplateau:
        factor:     0.1
        patience:   5
        min_lr:     0.00000000067
        verbose:    1
        
    # tensorboard:
        
    #     write_graph: true
    #     histogram_freq: 1
        
    # wandb:
    #     monitor: "val_loss"
    #     mode: "min"
    #     save_weights_only: false
    #     save_model: true
        
notes: ""


debug_cfg:
    test_datagen_inspector: false
    train_datagen_inspector: false
    val_datagen_inspector: false
    